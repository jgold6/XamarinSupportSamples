<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml">

<head>
    <meta http-equiv="Content-Type" content="text/html; charset=US-ASCII">
    <title>Xamarin University</title>
    <script src="https://google-code-prettify.googlecode.com/svn/loader/run_prettify.js"></script>
    <link rel="stylesheet" type="text/css" href="./res/styles/normalize.css">
    <link rel="stylesheet" type="text/css" href="./res/styles/styles.css">
    <script src="./res/js/script.js"></script>
</head>

<body>
    <header>TITLE GOES HERE</header>

    <section id="main">

        <h1>Objective 2: Creating Unit Tests</h1>
        <h2>Estimated Time: 20 minutes</h2>
        
        <h2>Goals</h2>
        <p>
        The primary goal of this exercise will be to ensure that you can successfully create unit tests and execute them successfully run and debug them on your machine.
        </p>

        <h1>Steps</h1>
        <p>
        Open the starter solution
        </p>
        <h2>Open the Starter Solution</h2>
        <ol>
            <li>Open the solution found in Part2.Start in Xamarin Studio..</li>
            
            <li>Create a new solution folder called <b>Test</b> in your solution</li>
            
            <li>Right click on the Test folder and select Add, and then Add New Project</li>
            
            <li>From the C# option, select NUnit and then select NUnit Library Project and name your project Phoneword.UnitTests.Core</li>
            
            <li>Rename the Test class to TestTranslation</li>
            
            <li>Rename the TestCase method to PhoneTranslation_CalculateTranslation_CheckIsAccurate</li>
            <li>Change <code>Main</code> method.</li>
             <p><a href="#" onclick="toggleCode(this,'defaultCheck');return false;" class="uiitem">Show Code</a>
            	<div class="indent-large" id="defaultCheck" style="display:none;">
<pre class="prettyprint">
[Test]
public void PhoneTranslation_CalculateTranslation_CheckIsAccurate ()
{
	var originalNumber = "1-855-XAMARIN";
	var expectedValue = "1-855-9262746";

	var translatedNumber = PhonewordTranslator.ToNumber (originalNumber);
	Assert.AreEqual (expectedValue, translatedNumber, "The expected phone numbers are not equivilent");
}

</pre>
				</div>
			</p>
			
			<li>Create a new Unit Test by right-clicking on the project and then selecting Add New and from the NUnit select Text Fixture.</li>
            <li>Rename it to <code>TestPhoneTranslateViewModel</code> method.</li>
             <p><a href="#" onclick="toggleCode(this,'viewModelTesting');return false;" class="uiitem">Show Code</a>
            	<div class="indent-large" id="viewModelTesting" style="display:none;">
<pre class="prettyprint">

	[TestFixture]
	public class TestPhoneTranslateViewModel
	{
		MainViewModel _appViewModel;
		PhoneTranslateViewModel _translateViewModel;

		[SetUp]
		public void SetupViewModels()
		{
			_appViewModel = new MainViewModel (new Mocks.TestDialer ());
			_translateViewModel = new PhoneTranslateViewModel (_appViewModel);
		}

		[Test]
		public void TestNoTranslateOnEmptyText ()
		{
			_translateViewModel.PhoneNumberText = "";
			Assert.AreEqual (_translateViewModel.TranslateCommand.CanExecute (null), false);
		}

		[Test]
		public void TestPhoneNumberAllowsForTranslation ()
		{
			_translateViewModel.PhoneNumberText = "1-855-XAMARIN";
			Assert.AreEqual (_translateViewModel.TranslateCommand.CanExecute (null), true);
		}

		[Test]
		public void TestPhoneNumberTranslates ()
		{
			_appViewModel.DialledNumbers.Clear ();
			_translateViewModel.PhoneNumberText = "1-855-XAMARIN";

			Assert.AreEqual (_translateViewModel.TranslateCommand.CanExecute (null), true, 
				"The option to Transalte is not available");

			_translateViewModel.TranslateCommand.Execute (null);

			Assert.AreEqual (_translateViewModel.TranslatedNumber, "1-855-9262746", 
				"The phone number did not translate as expected");

			_translateViewModel.CallCommand.Execute (null);

			Assert.IsTrue (_appViewModel.DialledNumbers.Count == 1 && 
				_appViewModel.DialledNumbers[0] == "1-855-9262746");
		}
	}
</pre>
				</div>
			</p>
			<li>Open the Unit Test pad. Select the View, Pads and then select Unit Tests</li>
			<li>Select the Run All option from the Unit Test tab</li>
            <li>Close the Solution</li>
        </ol>

        <h1>Summary</h1>
        <p>
        Congratulations, you have successfully run and created unit tests on your platform and see them execute.
        </p>
        
        <div class="align-right">
            <a href="../Start%20Here.html">Go Back</a>
        </div>
    </section>

    <footer>Copyright (C) 2014 Xamarin</footer>

</body>

</html>
